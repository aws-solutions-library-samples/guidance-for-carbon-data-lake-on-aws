{
  "version": 3,
  "sources": ["non-ip-instance.ts"],
  "sourcesContent": ["import { Construct } from 'constructs';\nimport { BaseInstanceProps, InstanceBase } from './instance';\nimport { NamespaceType } from './namespace';\nimport { IService } from './service';\nimport { CfnInstance } from './servicediscovery.generated';\n\nexport interface NonIpInstanceBaseProps extends BaseInstanceProps {\n}\n\n/*\n * Properties for a NonIpInstance\n */\nexport interface NonIpInstanceProps extends NonIpInstanceBaseProps {\n  /**\n   * The Cloudmap service this resource is registered to.\n   */\n  readonly service: IService;\n}\n\n/**\n * Instance accessible using values other than an IP address or a domain name (CNAME).\n * Specify the other values in Custom attributes.\n *\n * @resource AWS::ServiceDiscovery::Instance\n */\nexport class NonIpInstance extends InstanceBase {\n  /**\n   * The Id of the instance\n   */\n  public readonly instanceId: string;\n\n  /**\n   * The Cloudmap service to which the instance is registered.\n   */\n  public readonly service: IService;\n\n  constructor(scope: Construct, id: string, props: NonIpInstanceProps) {\n    super(scope, id);\n\n    if (props.service.namespace.type !== NamespaceType.HTTP) {\n      throw new Error('This type of instance can only be registered for HTTP namespaces.');\n    }\n\n    if (props.customAttributes === undefined || Object.keys(props.customAttributes).length === 0) {\n      throw new Error('You must specify at least one custom attribute for this instance type.');\n    }\n\n    const resource = new CfnInstance(this, 'Resource', {\n      instanceId: props.instanceId || this.uniqueInstanceId(),\n      serviceId: props.service.serviceId,\n      instanceAttributes: {\n        ...props.customAttributes,\n      },\n    });\n\n    this.service = props.service;\n    this.instanceId = resource.ref;\n  }\n}\n"],
  "mappings": "oNACA,WAAA,QAAA,cACA,YAAA,QAAA,eAEA,6BAAA,QAAA,gCAqBA,2BAAmC,YAAA,YAAY,CAW7C,YAAY,MAAkB,GAAY,MAAyB,CACjE,MAAM,MAAO,IAEb,sFAAI,MAAM,QAAQ,UAAU,OAAS,YAAA,cAAc,KACjD,KAAM,IAAI,OAAM,qEAGlB,GAAI,MAAM,mBAAqB,QAAa,OAAO,KAAK,MAAM,kBAAkB,SAAW,EACzF,KAAM,IAAI,OAAM,0EAGlB,KAAM,UAAW,GAAI,8BAAA,YAAY,KAAM,WAAY,CACjD,WAAY,MAAM,YAAc,KAAK,mBACrC,UAAW,MAAM,QAAQ,UACzB,mBAAoB,IACf,MAAM,oBAIb,KAAK,QAAU,MAAM,QACrB,KAAK,WAAa,SAAS,KA/B/B,QAAA,cAAA",
  "names": []
}
