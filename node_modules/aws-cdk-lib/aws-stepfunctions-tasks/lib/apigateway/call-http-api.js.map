{
  "version": 3,
  "sources": ["call-http-api.ts"],
  "sourcesContent": ["import * as iam from '../../../aws-iam';\nimport * as sfn from '../../../aws-stepfunctions';\nimport * as cdk from '../../../core';\nimport { Construct } from 'constructs';\nimport { CallApiGatewayEndpointBase } from './base';\nimport { CallApiGatewayEndpointBaseProps } from './base-types';\n\n/**\n * Properties for calling an HTTP API Endpoint\n */\nexport interface CallApiGatewayHttpApiEndpointProps extends CallApiGatewayEndpointBaseProps {\n  /**\n   * The Id of the API to call\n   */\n  readonly apiId: string;\n\n  /**\n   * The Stack in which the API is defined\n   */\n  readonly apiStack: cdk.Stack;\n\n  /**\n   * Name of the stage where the API is deployed to in API Gateway\n   * @default '$default'\n   */\n  readonly stageName?: string;\n}\n\n/**\n * Call HTTP API endpoint as a Task\n *\n * @see https://docs.aws.amazon.com/step-functions/latest/dg/connect-api-gateway.html\n */\nexport class CallApiGatewayHttpApiEndpoint extends CallApiGatewayEndpointBase {\n  protected readonly taskMetrics?: sfn.TaskMetricsConfig | undefined;\n  protected readonly taskPolicies?: iam.PolicyStatement[] | undefined;\n\n  protected readonly apiEndpoint: string;\n  protected readonly arnForExecuteApi: string;\n  protected readonly stageName?: string;\n\n  constructor(scope: Construct, id: string, private readonly props: CallApiGatewayHttpApiEndpointProps) {\n    super(scope, id, props);\n\n    this.apiEndpoint = this.getApiEndpoint();\n    this.arnForExecuteApi = this.getArnForExecuteApi();\n    this.stageName = props.stageName;\n\n    this.taskPolicies = this.createPolicyStatements();\n  }\n\n  private getApiEndpoint(): string {\n    const apiStack = this.props.apiStack;\n    return `${this.props.apiId}.execute-api.${apiStack.region}.${apiStack.urlSuffix}`;\n  }\n\n  private getArnForExecuteApi(): string {\n    const { apiId, stageName, method, apiPath } = this.props;\n\n    return this.props.apiStack.formatArn({\n      service: 'execute-api',\n      resource: apiId,\n      arnFormat: cdk.ArnFormat.SLASH_RESOURCE_NAME,\n      resourceName: `${stageName}/${method}${apiPath}`,\n    });\n  }\n}\n"],
  "mappings": "uOAEA,IAAA,QAAA,iBAEA,OAAA,QAAA,UA6BA,2CAAmD,QAAA,0BAA0B,CAQ3E,YAAY,MAAkB,GAA6B,MAAyC,CAClG,MAAM,MAAO,GAAI,OADwC,KAAA,MAAA,4GAGzD,KAAK,YAAc,KAAK,iBACxB,KAAK,iBAAmB,KAAK,sBAC7B,KAAK,UAAY,MAAM,UAEvB,KAAK,aAAe,KAAK,yBAGnB,gBAAc,CACpB,KAAM,UAAW,KAAK,MAAM,SAC5B,MAAO,GAAG,KAAK,MAAM,qBAAqB,SAAS,UAAU,SAAS,YAGhE,qBAAmB,CACzB,KAAM,CAAE,MAAO,UAAW,OAAQ,SAAY,KAAK,MAEnD,MAAO,MAAK,MAAM,SAAS,UAAU,CACnC,QAAS,cACT,SAAU,MACV,UAAW,IAAI,UAAU,oBACzB,aAAc,GAAG,aAAa,SAAS,aA9B7C,QAAA,8BAAA",
  "names": []
}
