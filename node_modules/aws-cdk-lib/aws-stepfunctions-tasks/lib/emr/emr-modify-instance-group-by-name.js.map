{
  "version": 3,
  "sources": ["emr-modify-instance-group-by-name.ts"],
  "sourcesContent": ["import * as iam from '../../../aws-iam';\nimport * as sfn from '../../../aws-stepfunctions';\nimport { Duration, Stack } from '../../../core';\nimport { Construct } from 'constructs';\nimport { integrationResourceArn } from '../private/task-utils';\nimport { EmrCreateCluster } from './emr-create-cluster';\nimport { InstanceGroupModifyConfigPropertyToJson } from './private/cluster-utils';\n\n/**\n * Properties for EmrModifyInstanceGroupByName\n *\n */\nexport interface EmrModifyInstanceGroupByNameProps extends sfn.TaskStateBaseProps {\n  /**\n   * The ClusterId to update.\n   */\n  readonly clusterId: string;\n\n  /**\n   * The InstanceGroupName to update.\n   */\n  readonly instanceGroupName: string;\n\n  /**\n   * The JSON that you want to provide to your ModifyInstanceGroup call as input.\n   *\n   * This uses the same syntax as the ModifyInstanceGroups API.\n   *\n   * @see https://docs.aws.amazon.com/emr/latest/APIReference/API_ModifyInstanceGroups.html\n   */\n  readonly instanceGroup: EmrModifyInstanceGroupByName.InstanceGroupModifyConfigProperty;\n}\n\n/**\n * A Step Functions Task to to modify an InstanceGroup on an EMR Cluster.\n *\n */\nexport class EmrModifyInstanceGroupByName extends sfn.TaskStateBase {\n  protected readonly taskPolicies?: iam.PolicyStatement[];\n  protected readonly taskMetrics?: sfn.TaskMetricsConfig;\n\n  constructor(scope: Construct, id: string, private readonly props: EmrModifyInstanceGroupByNameProps) {\n    super(scope, id, props);\n    this.taskPolicies = [\n      new iam.PolicyStatement({\n        actions: [\n          'elasticmapreduce:ModifyInstanceGroups',\n          'elasticmapreduce:ListInstanceGroups',\n        ],\n        resources: [\n          Stack.of(this).formatArn({\n            service: 'elasticmapreduce',\n            resource: 'cluster',\n            resourceName: '*',\n          }),\n        ],\n      }),\n    ];\n  }\n\n  /**\n   * @internal\n   */\n  protected _renderTask(): any {\n    return {\n      Resource: integrationResourceArn('elasticmapreduce', 'modifyInstanceGroupByName', sfn.IntegrationPattern.REQUEST_RESPONSE),\n      Parameters: sfn.FieldUtils.renderObject({\n        ClusterId: this.props.clusterId,\n        InstanceGroupName: this.props.instanceGroupName,\n        InstanceGroup: InstanceGroupModifyConfigPropertyToJson(this.props.instanceGroup),\n      }),\n    };\n  }\n}\n\nexport namespace EmrModifyInstanceGroupByName {\n  /**\n   * Custom policy for requesting termination protection or termination of specific instances when shrinking an instance group.\n   *\n   * @see https://docs.aws.amazon.com/emr/latest/APIReference/API_InstanceResizePolicy.html\n   *\n   */\n  export interface InstanceResizePolicyProperty {\n    /**\n     * Specific list of instances to be protected when shrinking an instance group.\n     *\n     * @default - No instances will be protected when shrinking an instance group\n     */\n    readonly instancesToProtect?: string[];\n\n    /**\n     * Specific list of instances to be terminated when shrinking an instance group.\n     *\n     * @default - No instances will be terminated when shrinking an instance group.\n     */\n    readonly instancesToTerminate?: string[];\n\n    /**\n     * Decommissioning timeout override for the specific list of instances to be terminated.\n     *\n     * @default cdk.Duration.seconds\n     */\n    readonly instanceTerminationTimeout?: Duration;\n  }\n\n  /**\n   * Policy for customizing shrink operations. Allows configuration of decommissioning timeout and targeted instance shrinking.\n   *\n   * @see https://docs.aws.amazon.com/emr/latest/APIReference/API_ShrinkPolicy.html\n   *\n   */\n  export interface ShrinkPolicyProperty {\n    /**\n     * The desired timeout for decommissioning an instance. Overrides the default YARN decommissioning timeout.\n     *\n     * @default - EMR selected default\n     */\n    readonly decommissionTimeout?: Duration;\n\n    /**\n     * Custom policy for requesting termination protection or termination of specific instances when shrinking an instance group.\n     *\n     * @default - None\n     */\n    readonly instanceResizePolicy?: InstanceResizePolicyProperty;\n  }\n\n  /**\n   * Modify the size or configurations of an instance group.\n   *\n   * @see https://docs.aws.amazon.com/emr/latest/APIReference/API_InstanceGroupModifyConfig.html\n   *\n   */\n  export interface InstanceGroupModifyConfigProperty {\n    /**\n     * A list of new or modified configurations to apply for an instance group.\n     *\n     * @default - None\n     */\n    readonly configurations?: EmrCreateCluster.ConfigurationProperty[];\n\n    /**\n     * The EC2 InstanceIds to terminate. After you terminate the instances, the instance group will not return to its original requested size.\n     *\n     * @default - None\n     */\n    readonly eC2InstanceIdsToTerminate?: string[];\n\n    /**\n     * Target size for the instance group.\n     *\n     * @default - None\n     */\n    readonly instanceCount?: number;\n\n    /**\n     * Policy for customizing shrink operations.\n     *\n     * @see https://docs.aws.amazon.com/emr/latest/APIReference/API_ShrinkPolicy.html\n     *\n     * @default - None\n     */\n    readonly shrinkPolicy?: ShrinkPolicyProperty;\n  }\n}\n"],
  "mappings": "sOAAA,IAAA,QAAA,oBACA,IAAA,QAAA,8BACA,OAAA,QAAA,iBAEA,aAAA,QAAA,yBAEA,gBAAA,QAAA,2BA+BA,0CAAkD,KAAI,aAAa,CAIjE,YAAY,MAAkB,GAA6B,MAAwC,CACjG,MAAM,MAAO,GAAI,OADwC,KAAA,MAAA,2GAEzD,KAAK,aAAe,CAClB,GAAI,KAAI,gBAAgB,CACtB,QAAS,CACP,wCACA,uCAEF,UAAW,CACT,OAAA,MAAM,GAAG,MAAM,UAAU,CACvB,QAAS,mBACT,SAAU,UACV,aAAc,UAUd,aAAW,CACnB,MAAO,CACL,SAAU,aAAA,uBAAuB,mBAAoB,4BAA6B,IAAI,mBAAmB,kBACzG,WAAY,IAAI,WAAW,aAAa,CACtC,UAAW,KAAK,MAAM,UACtB,kBAAmB,KAAK,MAAM,kBAC9B,cAAe,gBAAA,wCAAwC,KAAK,MAAM,mBAhC1E,QAAA,6BAAA",
  "names": []
}
