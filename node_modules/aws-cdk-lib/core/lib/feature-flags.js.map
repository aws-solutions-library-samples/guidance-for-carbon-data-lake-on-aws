{
  "version": 3,
  "sources": ["feature-flags.ts"],
  "sourcesContent": ["import * as cxapi from '../../cx-api';\nimport { Construct } from 'constructs';\n\n/**\n * Features that are implemented behind a flag in order to preserve backwards\n * compatibility for existing apps. The list of flags are available in the\n * `@aws-cdk/cx-api` module.\n *\n * The state of the flag for this application is stored as a CDK context variable.\n */\nexport class FeatureFlags {\n  /**\n   * Inspect feature flags on the construct node's context.\n   */\n  public static of(scope: Construct) {\n    return new FeatureFlags(scope);\n  }\n\n  private constructor(private readonly construct: Construct) {}\n\n  /**\n   * Check whether a feature flag is enabled. If configured, the flag is present in\n   * the construct node context. Falls back to the defaults defined in the `cx-api`\n   * module.\n   */\n  public isEnabled(featureFlag: string): boolean | undefined {\n    const context = this.construct.node.tryGetContext(featureFlag);\n    if (cxapi.FUTURE_FLAGS_EXPIRED.includes(featureFlag)) {\n      if (context !== undefined) {\n        throw new Error(`Unsupported feature flag '${featureFlag}'. This flag existed on CDKv1 but has been removed in CDKv2.`\n          + ' CDK will now behave as the same as when the flag is enabled.');\n      }\n      return true;\n    }\n    return context ?? cxapi.futureFlagDefault(featureFlag);\n  }\n}\n"],
  "mappings": "wJAAA,MAAA,QAAA,gBAUA,kBAAyB,CAQvB,YAAqC,UAAoB,CAApB,KAAA,UAAA,gBAJvB,IAAG,MAAgB,CAC/B,MAAO,IAAI,cAAa,OAUnB,UAAU,YAAmB,CAClC,KAAM,SAAU,KAAK,UAAU,KAAK,cAAc,aAClD,GAAI,MAAM,qBAAqB,SAAS,aAAc,CACpD,GAAI,UAAY,OACd,KAAM,IAAI,OAAM,6BAA6B,wIAG/C,MAAO,GAET,MAAO,UAAO,KAAP,QAAW,MAAM,kBAAkB,cAxB9C,QAAA,aAAA",
  "names": []
}
