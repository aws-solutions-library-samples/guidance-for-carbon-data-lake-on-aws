{
  "version": 3,
  "sources": ["outputs.ts"],
  "sourcesContent": ["import * as cp from '../../../../aws-codepipeline';\nimport { Step } from '../../blueprint/step';\nimport { StepOutput } from '../../helpers-internal';\n\nconst CODEPIPELINE_ENGINE_NAME = 'codepipeline';\n\nexport function makeCodePipelineOutput(step: Step, variableName: string) {\n  return new StepOutput(step, CODEPIPELINE_ENGINE_NAME, variableName).toString();\n}\n\n/**\n * If the step is producing outputs, determine a variableNamespace for it, and configure that on the outputs\n */\nexport function namespaceStepOutputs(step: Step, stage: cp.IStage, name: string): string | undefined {\n  let ret: string | undefined;\n  for (const output of StepOutput.producedStepOutputs(step)) {\n    ret = namespaceName(stage, name);\n    if (output.engineName !== CODEPIPELINE_ENGINE_NAME) {\n      throw new Error(`Found unrecognized output type: ${output.engineName}`);\n    }\n\n    if (typeof output.engineSpecificInformation !== 'string') {\n      throw new Error(`CodePipeline requires that 'engineSpecificInformation' is a string, got: ${JSON.stringify(output.engineSpecificInformation)}`);\n    }\n    output.defineResolution(`#{${ret}.${output.engineSpecificInformation}}`);\n  }\n  return ret;\n}\n\n/**\n * Generate a variable namespace from stage and action names\n *\n * Variable namespaces cannot have '.', but they can have '@'. Other than that,\n * action names are more limited so they translate easily.\n */\nexport function namespaceName(stage: cp.IStage, name: string) {\n  return `${stage.stageName}/${name}`.replace(/[^a-zA-Z0-9@_-]/g, '@');\n}"],
  "mappings": "6JAEA,KAAA,oBAAA,QAAA,0BAEM,yBAA2B,eAEjC,gCAAuC,KAAY,aAAoB,CACrE,MAAO,IAAI,oBAAA,WAAW,KAAM,yBAA0B,cAAc,WADtE,QAAA,uBAAA,uBAOA,8BAAqC,KAAY,MAAkB,KAAY,CAC7E,GAAI,KACJ,SAAW,UAAU,oBAAA,WAAW,oBAAoB,MAAO,CAEzD,GADA,IAAM,cAAc,MAAO,MACvB,OAAO,aAAe,yBACxB,KAAM,IAAI,OAAM,mCAAmC,OAAO,cAG5D,GAAI,MAAO,QAAO,2BAA8B,SAC9C,KAAM,IAAI,OAAM,4EAA4E,KAAK,UAAU,OAAO,8BAEpH,OAAO,iBAAiB,KAAK,OAAO,OAAO,8BAE7C,MAAO,KAbT,QAAA,qBAAA,qBAsBA,uBAA8B,MAAkB,KAAY,CAC1D,MAAO,GAAG,MAAM,aAAa,OAAO,QAAQ,mBAAoB,KADlE,QAAA,cAAA",
  "names": []
}
