{
  "version": 3,
  "sources": ["deploy-action.ts"],
  "sourcesContent": ["import * as codepipeline from '../../../aws-codepipeline';\nimport { SecretValue } from '../../../core';\nimport { Action } from '../action';\n\n// keep this import separate from other imports to reduce chance for merge conflicts with v2-main\n// eslint-disable-next-line no-duplicate-imports, import/order\nimport { Construct } from 'constructs';\n\n/**\n * Construction properties of the {@link AlexaSkillDeployAction Alexa deploy Action}.\n */\nexport interface AlexaSkillDeployActionProps extends codepipeline.CommonActionProps {\n  /**\n   * The client id of the developer console token\n   */\n  readonly clientId: string;\n\n  /**\n   * The client secret of the developer console token\n   */\n  readonly clientSecret: SecretValue;\n\n  /**\n   * The refresh token of the developer console token\n   */\n  readonly refreshToken: SecretValue;\n\n  /**\n   * The Alexa skill id\n   */\n  readonly skillId: string;\n\n  /**\n   * The source artifact containing the voice model and skill manifest\n   */\n  readonly input: codepipeline.Artifact;\n\n  /**\n   * An optional artifact containing overrides for the skill manifest\n   */\n  readonly parameterOverridesArtifact?: codepipeline.Artifact;\n}\n\n/**\n * Deploys the skill to Alexa\n */\nexport class AlexaSkillDeployAction extends Action {\n  private readonly props: AlexaSkillDeployActionProps;\n\n  constructor(props: AlexaSkillDeployActionProps) {\n    super({\n      ...props,\n      category: codepipeline.ActionCategory.DEPLOY,\n      owner: 'ThirdParty',\n      provider: 'AlexaSkillsKit',\n      artifactBounds: {\n        minInputs: 1,\n        maxInputs: 2,\n        minOutputs: 0,\n        maxOutputs: 0,\n      },\n      inputs: getInputs(props),\n    });\n\n    this.props = props;\n  }\n\n  protected bound(_scope: Construct, _stage: codepipeline.IStage, _options: codepipeline.ActionBindOptions):\n  codepipeline.ActionConfig {\n    return {\n      configuration: {\n        ClientId: this.props.clientId,\n        ClientSecret: this.props.clientSecret,\n        RefreshToken: this.props.refreshToken,\n        SkillId: this.props.skillId,\n      },\n    };\n  }\n}\n\nfunction getInputs(props: AlexaSkillDeployActionProps): codepipeline.Artifact[] {\n  const ret = [props.input];\n  if (props.parameterOverridesArtifact) {\n    ret.push(props.parameterOverridesArtifact);\n  }\n  return ret;\n}\n"],
  "mappings": "gOAAA,aAAA,QAAA,6BAEA,SAAA,QAAA,aA4CA,oCAA4C,UAAA,MAAM,CAGhD,YAAY,MAAkC,CAC5C,MAAM,IACD,MACH,SAAU,aAAa,eAAe,OACtC,MAAO,aACP,SAAU,iBACV,eAAgB,CACd,UAAW,EACX,UAAW,EACX,WAAY,EACZ,WAAY,GAEd,OAAQ,UAAU,yGAGpB,KAAK,MAAQ,MAGL,MAAM,OAAmB,OAA6B,SAAwC,6JAE/F,CACL,cAAe,CACb,SAAU,KAAK,MAAM,SACrB,aAAc,KAAK,MAAM,aACzB,aAAc,KAAK,MAAM,aACzB,QAAS,KAAK,MAAM,WA5B5B,QAAA,uBAAA,6JAkCA,mBAAmB,MAAkC,CACnD,KAAM,KAAM,CAAC,MAAM,OACnB,MAAI,OAAM,4BACR,IAAI,KAAK,MAAM,4BAEV",
  "names": []
}
