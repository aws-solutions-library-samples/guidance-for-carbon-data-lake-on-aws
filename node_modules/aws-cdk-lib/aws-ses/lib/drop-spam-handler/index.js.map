{
  "version": 3,
  "sources": ["index.ts"],
  "sourcesContent": ["/* eslint-disable no-console */\n\n// Adapted from https://docs.aws.amazon.com/ses/latest/DeveloperGuide/receiving-email-action-lambda-example-functions.html\nexport async function handler(event: AWSLambda.SESEvent): Promise<{ disposition: string } | null> {\n  console.log('Spam filter');\n\n  const sesNotification = event.Records[0].ses;\n  console.log('SES Notification: %j', sesNotification);\n\n  // Check if any spam check failed\n  if (sesNotification.receipt.spfVerdict.status === 'FAIL'\n      || sesNotification.receipt.dkimVerdict.status === 'FAIL'\n      || sesNotification.receipt.spamVerdict.status === 'FAIL'\n      || sesNotification.receipt.virusVerdict.status === 'FAIL') {\n    console.log('Dropping spam');\n\n    // Stop processing rule set, dropping message\n    return { disposition: 'STOP_RULE_SET' };\n  }\n\n  return null;\n}\n"],
  "mappings": "2FAGO,uBAAuB,MAAyB,CACrD,QAAQ,IAAI,eAEZ,KAAM,iBAAkB,MAAM,QAAQ,GAAG,IAIzC,MAHA,SAAQ,IAAI,uBAAwB,iBAGhC,gBAAgB,QAAQ,WAAW,SAAW,QAC3C,gBAAgB,QAAQ,YAAY,SAAW,QAC/C,gBAAgB,QAAQ,YAAY,SAAW,QAC/C,gBAAgB,QAAQ,aAAa,SAAW,OACrD,SAAQ,IAAI,iBAGL,CAAE,YAAa,kBAGjB,KAjBT,QAAA,QAAA",
  "names": []
}
