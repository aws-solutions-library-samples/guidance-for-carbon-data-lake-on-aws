{
  "version": 3,
  "sources": ["cloudfront-target.ts"],
  "sourcesContent": ["import * as cloudfront from '../../aws-cloudfront';\nimport * as route53 from '../../aws-route53';\nimport { Aws, CfnMapping, Stack } from '../../core';\nimport { IConstruct } from 'constructs';\n\n/**\n * Use a CloudFront Distribution as an alias record target\n */\nexport class CloudFrontTarget implements route53.IAliasRecordTarget {\n  /**\n   * The hosted zone Id if using an alias record in Route53.\n   * This value never changes.\n   */\n  public static readonly CLOUDFRONT_ZONE_ID = 'Z2FDTNDATAQYW2';\n\n  /**\n   * Get the hosted zone id for the current scope.\n   *\n   * @param scope - scope in which this resource is defined\n   */\n  public static getHostedZoneId(scope: IConstruct) {\n    const mappingName = 'AWSCloudFrontPartitionHostedZoneIdMap';\n    const scopeStack = Stack.of(scope);\n\n    let mapping =\n      (scopeStack.node.tryFindChild(mappingName) as CfnMapping) ??\n      new CfnMapping(scopeStack, mappingName, {\n        mapping: {\n          ['aws']: {\n            zoneId: 'Z2FDTNDATAQYW2', // https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-route53-aliastarget.html\n          },\n          ['aws-cn']: {\n            zoneId: 'Z3RFFRIM2A3IF5', // https://docs.amazonaws.cn/en_us/aws/latest/userguide/route53.html\n          },\n        },\n      });\n\n    return mapping.findInMap(Aws.PARTITION, 'zoneId');\n  }\n\n  constructor(private readonly distribution: cloudfront.IDistribution) {\n  }\n\n  public bind(_record: route53.IRecordSet, _zone?: route53.IHostedZone): route53.AliasRecordTargetConfig {\n    return {\n      hostedZoneId: CloudFrontTarget.getHostedZoneId(this.distribution),\n      dnsName: this.distribution.distributionDomainName,\n    };\n  }\n}\n"],
  "mappings": "uNAEA,OAAA,QAAA,cAMA,sBAA6B,CAgC3B,YAA6B,aAAsC,CAAtC,KAAA,aAAA,kGApBf,iBAAgB,MAAiB,QAC7C,KAAM,aAAc,wCACd,WAAa,OAAA,MAAM,GAAG,OAe5B,MAAO,AAbI,KACR,WAAW,KAAK,aAAa,gBAA2B,MAAA,KAAA,OAAA,GACzD,GAAI,QAAA,WAAW,WAAY,YAAa,CACtC,QAAS,CACN,IAAQ,CACP,OAAQ,mBAET,UAAW,CACV,OAAQ,sBAKD,UAAU,OAAA,IAAI,UAAW,UAMnC,KAAK,QAA6B,MAA2B,+IAC3D,CACL,aAAc,iBAAiB,gBAAgB,KAAK,cACpD,QAAS,KAAK,aAAa,yBAtCjC,QAAA,iBAAA,sIAKyB,iBAAA,mBAAqB",
  "names": []
}
