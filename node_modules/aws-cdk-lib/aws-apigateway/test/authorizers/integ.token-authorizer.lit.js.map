{
  "version": 3,
  "sources": ["integ.token-authorizer.lit.ts"],
  "sourcesContent": ["/// !cdk-integ pragma:ignore-assets\nimport * as path from 'path';\nimport * as lambda from '../../../aws-lambda';\nimport { App, Stack } from '../../../core';\nimport { MockIntegration, PassthroughBehavior, RestApi, TokenAuthorizer } from '../../lib';\n\n/*\n * Stack verification steps:\n * * `curl -s -o /dev/null -w \"%{http_code}\" <url>` should return 401\n * * `curl -s -o /dev/null -w \"%{http_code}\" -H 'Authorization: deny' <url>` should return 403\n * * `curl -s -o /dev/null -w \"%{http_code}\" -H 'Authorization: allow' <url>` should return 200\n */\n\nconst app = new App();\nconst stack = new Stack(app, 'TokenAuthorizerInteg');\n\nconst authorizerFn = new lambda.Function(stack, 'MyAuthorizerFunction', {\n  runtime: lambda.Runtime.NODEJS_14_X,\n  handler: 'index.handler',\n  code: lambda.AssetCode.fromAsset(path.join(__dirname, 'integ.token-authorizer.handler')),\n});\n\nconst restapi = new RestApi(stack, 'MyRestApi');\n\nconst authorizer = new TokenAuthorizer(stack, 'MyAuthorizer', {\n  handler: authorizerFn,\n});\n\nrestapi.root.addMethod('ANY', new MockIntegration({\n  integrationResponses: [\n    { statusCode: '200' },\n  ],\n  passthroughBehavior: PassthroughBehavior.NEVER,\n  requestTemplates: {\n    'application/json': '{ \"statusCode\": 200 }',\n  },\n}), {\n  methodResponses: [\n    { statusCode: '200' },\n  ],\n  authorizer,\n});\n"],
  "mappings": "oEACA,KAAA,MAAA,QAAA,QACA,OAAA,QAAA,uBACA,OAAA,QAAA,iBACA,MAAA,QAAA,aASM,IAAM,GAAI,QAAA,IACV,MAAQ,GAAI,QAAA,MAAM,IAAK,wBAEvB,aAAe,GAAI,QAAO,SAAS,MAAO,uBAAwB,CACtE,QAAS,OAAO,QAAQ,YACxB,QAAS,gBACT,KAAM,OAAO,UAAU,UAAU,KAAK,KAAK,UAAW,qCAGlD,QAAU,GAAI,OAAA,QAAQ,MAAO,aAE7B,WAAa,GAAI,OAAA,gBAAgB,MAAO,eAAgB,CAC5D,QAAS,eAGX,QAAQ,KAAK,UAAU,MAAO,GAAI,OAAA,gBAAgB,CAChD,qBAAsB,CACpB,CAAE,WAAY,QAEhB,oBAAqB,MAAA,oBAAoB,MACzC,iBAAkB,CAChB,mBAAoB,2BAEpB,CACF,gBAAiB,CACf,CAAE,WAAY,QAEhB",
  "names": []
}
