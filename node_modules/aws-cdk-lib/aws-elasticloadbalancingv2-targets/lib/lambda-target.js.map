{
  "version": 3,
  "sources": ["lambda-target.ts"],
  "sourcesContent": ["import * as elbv2 from '../../aws-elasticloadbalancingv2';\nimport * as iam from '../../aws-iam';\nimport * as lambda from '../../aws-lambda';\n\nexport class LambdaTarget implements elbv2.IApplicationLoadBalancerTarget {\n  /**\n   * Create a new Lambda target\n   *\n   * @param functionArn The Lambda Function to load balance to\n   */\n  constructor(private readonly fn: lambda.IFunction) {\n  }\n\n  /**\n   * Register this instance target with a load balancer\n   *\n   * Don't call this, it is called automatically when you add the target to a\n   * load balancer.\n   */\n  public attachToApplicationTargetGroup(targetGroup: elbv2.IApplicationTargetGroup): elbv2.LoadBalancerTargetProps {\n    const grant = this.fn.grantInvoke(new iam.ServicePrincipal('elasticloadbalancing.amazonaws.com'));\n    grant.applyBefore(targetGroup);\n    return this.attach(targetGroup);\n  }\n\n  /**\n   * Register this instance target with a load balancer\n   *\n   * Don't call this, it is called automatically when you add the target to a\n   * load balancer.\n   */\n  public attachToNetworkTargetGroup(targetGroup: elbv2.INetworkTargetGroup): elbv2.LoadBalancerTargetProps {\n    const grant = this.fn.grantInvoke(new iam.ServicePrincipal('elasticloadbalancing.amazonaws.com'));\n    grant.applyBefore(targetGroup);\n    return this.attach(targetGroup);\n  }\n\n  private attach(_targetGroup: elbv2.ITargetGroup): elbv2.LoadBalancerTargetProps {\n    return {\n      targetType: elbv2.TargetType.LAMBDA,\n      targetJson: { id: this.fn.functionArn },\n    };\n  }\n}\n"],
  "mappings": "mNAAA,MAAA,QAAA,oCACA,IAAA,QAAA,iBAGA,kBAAyB,CAMvB,YAA6B,GAAoB,CAApB,KAAA,GAAA,gEAStB,+BAA+B,YAA0C,4GAE9E,AADc,KAAK,GAAG,YAAY,GAAI,KAAI,iBAAiB,uCACrD,YAAY,aACX,KAAK,OAAO,aASd,2BAA2B,YAAsC,wGAEtE,AADc,KAAK,GAAG,YAAY,GAAI,KAAI,iBAAiB,uCACrD,YAAY,aACX,KAAK,OAAO,aAGb,OAAO,aAAgC,CAC7C,MAAO,CACL,WAAY,MAAM,WAAW,OAC7B,WAAY,CAAE,GAAI,KAAK,GAAG,eApChC,QAAA,aAAA",
  "names": []
}
