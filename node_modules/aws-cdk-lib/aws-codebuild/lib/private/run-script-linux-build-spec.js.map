{
  "version": 3,
  "sources": ["run-script-linux-build-spec.ts"],
  "sourcesContent": ["import { BuildSpec } from '../build-spec';\n\nexport const S3_BUCKET_ENV = 'SCRIPT_S3_BUCKET';\nexport const S3_KEY_ENV = 'SCRIPT_S3_KEY';\n\nexport function runScriptLinuxBuildSpec(entrypoint: string) {\n  return BuildSpec.fromObject({\n    version: '0.2',\n    phases: {\n      pre_build: {\n        commands: [\n          // Better echo the location here; if this fails, the error message only contains\n          // the unexpanded variables by default. It might fail if you're running an old\n          // definition of the CodeBuild project--the permissions will have been changed\n          // to only allow downloading the very latest version.\n          `echo \"Downloading scripts from s3://\\${${S3_BUCKET_ENV}}/\\${${S3_KEY_ENV}}\"`,\n          `aws s3 cp s3://\\${${S3_BUCKET_ENV}}/\\${${S3_KEY_ENV}} /tmp`,\n          'mkdir -p /tmp/scriptdir',\n          `unzip /tmp/$(basename \\$${S3_KEY_ENV}) -d /tmp/scriptdir`,\n        ],\n      },\n      build: {\n        commands: [\n          'export SCRIPT_DIR=/tmp/scriptdir',\n          `echo \"Running ${entrypoint}\"`,\n          `chmod +x /tmp/scriptdir/${entrypoint}`,\n          `/tmp/scriptdir/${entrypoint}`,\n        ],\n      },\n    },\n  });\n}\n"],
  "mappings": "oJAAA,KAAA,cAAA,QAAA,iBAEa,QAAA,cAAgB,mBAChB,QAAA,WAAa,gBAE1B,iCAAwC,WAAkB,CACxD,MAAO,cAAA,UAAU,WAAW,CAC1B,QAAS,MACT,OAAQ,CACN,UAAW,CACT,SAAU,CAKR,0CAA0C,QAAA,qBAAqB,QAAA,eAC/D,qBAAqB,QAAA,qBAAqB,QAAA,mBAC1C,0BACA,0BAA2B,QAAA,kCAG/B,MAAO,CACL,SAAU,CACR,mCACA,iBAAiB,cACjB,2BAA2B,aAC3B,kBAAkB,kBArB5B,QAAA,wBAAA",
  "names": []
}
